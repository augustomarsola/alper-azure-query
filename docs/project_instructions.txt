Project Instructions - Next.js 16 + Tailwind + Shadcn + Azure DevOps Boards

1. Architecture Overview
- Next.js 16.0.3 using App Router for full-stack routes.
- TailwindCSS for styling.
- Shadcn/ui components for UI and Chart visualizations.
- Dark theme enabled by default.
- Full-stack Next.js backend routes for calling Azure DevOps Boards API.
- Azure DevOps authentication via Personal Access Token (PAT) stored in environment variables.

2. Libraries Used
- next@16.0.3
- react
- tailwindcss
- shadcn/ui
- axios or fetch for API calls
- TypeScript (strict mode)

3. Folder Structure (Planned)
- /app
  - /dashboard
    - page.tsx
  - /api
    - /squads
      - route.ts
    - /tasks
      - route.ts
    - /pbi-return-rate
      - route.ts
- /components
  - /ui (shadcn components)
- /lib
  - azure-devops.ts (API wrapper)
  - types.ts
  - utils.ts

4. Azure DevOps API Usage
- Requires Personal Access Token (PAT)
- API wrapper will include:
  - list projects in organization
  - list tasks for a project
  - analyze PBIs with rework (PBIs with Bug children)
  - track work item relations (parent-child)
- Environment variables

5. UI Requirements
- Dark theme
- Clean minimal layout
- Top-centered Select component (shadcn/ui)
- Select options: squads fetched via API
- Graphs using shadcn/ui Chart component

6. Components
- Select (shadcn)
- Tabs (shadcn) - Two tabs for different views
- Badge (shadcn) - Status indicators
- Cards
- Table
- Chart
- Skeleton for Loading

7. Data Flow
- User selects project from Select component
- Frontend displays Tabs with two views:
  1. Return Rate of PBIs (OKR tracking)
  2. General Task Overview
- Frontend calls appropriate API endpoints
- Backend requests Azure DevOps API
- Backend returns data
- Frontend displays:
  - PBI Return Rate Tab:
    - First Semester metrics (target: <10%, ideal: <5%)
    - Second Semester metrics (target: <5%, ideal: <2.5%)
    - Status badges (Tranquilo/green, Atenção/yellow, Perigo/red)
    - Table of PBIs with rework (PBIs with Bug children)
  - Overview Tab:
    - Task list
    - Charts:
      - Tasks per Status
      - Tasks per Type
      - Tasks per User

8. OKR Tracking
- OKR: "Garantir taxa de retorno de PBIs abaixo de 10% no primeiro semestre e abaixo de 5% no segundo"
- Rework Definition: PBI has at least one Bug as a child work item
- Calculation: (PBIs with Bugs / Total PBIs) * 100
- Status Thresholds:
  - First Semester:
    - <5%: Tranquilo (green)
    - 5-10%: Atenção (yellow)
    - >10%: Perigo (red)
  - Second Semester:
    - <2.5%: Tranquilo (green)
    - 2.5-5%: Atenção (yellow)
    - >5%: Perigo (red)

9. Missing Variables
If any required variables (PAT, organization, project) or endpoint details are missing, request them from user.

9. Documentation Checks
Before generating ANY code, always:
use context7 nextjs
use context7 tailwind
use context7 shadcn
use context7 azure-devops

Always follow latest documentation.

10. Error Handling
- Handle missing PAT
- Handle rate limits
- Handle empty squads or missing tasks

End of File.
